{% extends 'halo/base.html' %}


{% load staticfiles %}


{% block css %}

  {{ block.super }}

  <link href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" rel='stylesheet' />
  <link href="{% static 'contrib/c3/css/c3.min.css' %}" rel="stylesheet" />

  <style>
    .map, .time-chart, .events {
      border: 1px solid #333;
      margin: 1em 0;
    }
    .map {
      height: 30em;
    }
    .time-chart {
      height: 30em;
    }
    .leaflet-popup-content {
      color: #333333;
    }
    .leaflet-popup-content .btn .btn-info {
      color: #ffffff;
    }
  </style>

{% endblock css %}


{% block js_header %}
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script src="{% static 'contrib/d3/js/d3.min.js' %}"></script>
  <script src="{% static 'contrib/c3/js/c3.min.js' %}"></script>
{% endblock js_header %}


{% block content %}
  <div claas="col-xs-12">
    {% include 'events/form.html' %}
  </div>
  <div class="col-xs-12">
    <div id="map" class="map"></div>
  </div>
  <div class="col-md-6">
    <div id="time-chart" class="time-chart"></div>
  </div>
  <div class="col-md-6">
    <div id="events" class="events">
      <table class="table table-striped table-responsive">
        <tr>
          <td>Thing!</td>
        </tr>
      </table>
    </div>
  </div>
{% endblock content %}


{% block js_footer %}
  <script>
    var features = {
      "type": "FeatureCollection",
      "features": {{ geography|safe }}
    };
    var connection_log = {{ log|safe }};
  </script>
  <script src="{% static 'events/js/map.js' %}"></script>
  <script src="{% static 'events/js/chart.js' %}"></script>
{% endblock js_footer %}
